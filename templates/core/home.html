{% extends 'base.html' %}
{% load static %}
{% load image_tags %}

{% block title %}{{ page_title }} - PyOpenSci{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="relative text-white overflow-hidden" style="background-image: linear-gradient(rgba(0, 0, 0, 0.15), rgba(0, 0, 0, 0.15)), url('{% static "images/headers/pyopensci-sprints.png" %}'); background-size: cover; background-position: center;">
    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24">
        <div class="text-center">
            <h1 class="text-4xl md:text-6xl font-bold mb-6 font-poppins">Welcome to pyOpenSci</h1>
            <p class="text-xl md:text-2xl mb-8 max-w-4xl mx-auto font-nunito">{{ hero_title }}</p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="#" class="bg-transparent border-2 border-white hover:bg-white hover:text-pyos-deep-purple text-white px-8 py-3 rounded-lg font-semibold transition-all duration-300">
                    Submit a Package For Review
                </a>
                <a href="#" class="bg-transparent border-2 border-white hover:bg-white hover:text-pyos-deep-purple text-white px-8 py-3 rounded-lg font-semibold transition-all duration-300">
                    Learn to Create a Python Package
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Mission Statement -->
<section class="py-12 bg-white">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <p class="text-xl text-gray-700 font-nunito">{{ hero_subtitle }}</p>
    </div>
</section>

<!-- Feature Cards Section -->
<section class="py-16 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-3xl md:text-4xl font-bold text-center mb-12 text-pyos-deep-purple font-poppins">
            Peer review of Python software to support open science
        </h2>
        
        <div class="grid md:grid-cols-3 gap-8">
            <!-- Software Peer Review Card -->
            <div class="bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300">
                <div class="h-48 overflow-hidden">
                    {% card_image "landing-pages/software-peer-review" "Light purple image showing software peer review with a woman at a laptop with a pyOpenSci logo" %}
                </div>
                <div class="p-6">
                    <h3 class="text-xl font-bold mb-4 text-pyos-deep-purple font-poppins">We Run Software Peer Review</h3>
                    <p class="text-gray-700 mb-4">We review Python packages and software with the goal of helping scientists build better, discoverable and usable software.</p>
                    <p class="text-gray-700 mb-4">Your package can also be published in JOSS through our review process.</p>
                    <ul class="text-sm text-gray-600 space-y-2">
                        <li><i class="fa-solid fa-check-double text-pyos-teal mr-2"></i>Submit a package for review</li>
                        <li><i class="fa-solid fa-check-double text-pyos-teal mr-2"></i>Apply to become a reviewer</li>
                    </ul>
                </div>
            </div>

            <!-- Community Partnerships Card -->
            <div class="bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300">
                <div class="h-48 overflow-hidden">
                    {% card_image "landing-pages/community-partnerships" "Light purple image with diverse stick figure people representing community partnerships" %}
                </div>
                <div class="p-6">
                    <h3 class="text-xl font-bold mb-4 text-pyos-deep-purple font-poppins">We Build Community Partnerships</h3>
                    <p class="text-gray-700 mb-4">We partner with open source communities to share resources and processes such as Peer review.</p>
                    <p class="text-gray-700 mb-4">Learn more about our partnerships with:</p>
                    <ul class="text-sm text-gray-600 space-y-2">
                        <li><i class="fa-solid fa-handshake text-pyos-teal mr-2"></i>JOSS</li>
                        <li><i class="fa-solid fa-handshake text-pyos-teal mr-2"></i>Astropy</li>
                    </ul>
                </div>
            </div>

            <!-- Python Packaging Card -->
            <div class="bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300">
                <div class="h-48 overflow-hidden">
                    {% card_image "landing-pages/simple-python-packaging-header" "Light purple image showing python packaging guide with a laptop and hands" %}
                </div>
                <div class="p-6">
                    <h3 class="text-xl font-bold mb-4 text-pyos-deep-purple font-poppins">We Break Down Python Packaging Painpoints</h3>
                    <p class="text-gray-700 mb-4">Check out our beginner-friendly resources:</p>
                    <ul class="text-sm text-gray-600 space-y-2">
                        <li><i class="fa-solid fa-book-open text-pyos-teal mr-2"></i>Python Package Tutorials</li>
                        <li><i class="fa-solid fa-book-open text-pyos-teal mr-2"></i>Python package guide</li>
                    </ul>
                    <p class="text-gray-700 mt-4 text-sm">All of our resources are co-developed with the broader Python community and reviewed by beginner to expert Pythonistas to ensure the material is accessible for all.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Broadening Participation Section -->
<section class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-3xl md:text-4xl font-bold text-center mb-12 text-pyos-deep-purple font-poppins">
            Broadening participation in scientific open source
        </h2>
        
        <div class="grid md:grid-cols-2 gap-8 items-center">
            <div>
                <div class="h-80 rounded-lg overflow-hidden">
                    {% responsive_image "pyopensci-sprint-pycon-2023" "Image showing 3 people working at 2 computers during a sprint at PyCon USA 2023" "w-full h-full object-cover rounded-lg" %}
                </div>
            </div>
            <div>
                <h3 class="text-2xl font-bold mb-4 text-pyos-deep-purple font-poppins">You don't need to be an expert to get involved</h3>
                <p class="text-gray-700 mb-4">Are you new to software peer review but you want to get involved? We've got you!</p>
                <p class="text-gray-700 mb-4">We offer support and mentorship to new reviewers completing their first review.</p>
                <p class="text-gray-700 mb-4">All reviewers don't need to be python package experts. We welcome reviewers that focus on software accessibility and usability.</p>
                <p class="text-gray-700">Are you new to peer review? We offer a <a href="#" class="text-pyos-deep-purple hover:underline">mentorship program</a> for anyone interested in participating in peer review but who might like a bit of support.</p>
            </div>
        </div>
    </div>
</section>

<!-- New Contributors Section -->
<section class="py-16 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-3xl font-bold text-center mb-12 text-pyos-deep-purple font-poppins">New pyOpenSci contributors</h2>
        
        <div class="grid md:grid-cols-4 gap-6">
            {% for contributor in recent_contributors %}
            <div class="bg-white rounded-lg shadow-md p-6 text-center hover:shadow-lg transition-shadow duration-300">
                {% if contributor.github_avatar_url %}
                    <img src="{{ contributor.github_avatar_url }}" 
                         alt="GitHub photo of {{ contributor.display_name }}"
                         class="w-50 h-50 rounded-full mx-auto mb-4 object-cover">
                {% else %}
                    <div class="w-50 h-50 bg-gray-300 rounded-full mx-auto mb-4 flex items-center justify-center">
                        <i class="fab fa-github text-2xl text-gray-600"></i>
                    </div>
                {% endif %}
                
                <p class="text-2xl font-semibold text-pyos-deep-purple mb-2">
                    {{ contributor.display_name }}
                </p>
                
                {% if contributor.organization %}
                    <p class="text-sm text-gray-600 mb-2">{{ contributor.organization }}</p>
                {% endif %}
                
                {% if contributor.title %}
                    <p class="text-xs text-gray-500 mb-3">
                        {% for title in contributor.title %}
                            {{ title }}{% if not forloop.last %}, {% endif %}
                        {% endfor %}
                    </p>
                {% endif %}
                
                <div class="flex justify-center space-x-2 mt-3">
                    <a href="{{ contributor.github_profile_url }}" 
                       target="_blank"
                       class="text-gray-400 hover:text-pyos-deep-purple transition-colors"
                       title="View {{ contributor.display_name }}'s GitHub profile">
                        <i class="fab fa-github"></i>
                    </a>
                    
                    {% if contributor.twitter %}
                        <a href="https://twitter.com/{{ contributor.twitter }}" 
                           target="_blank"
                           class="text-gray-400 hover:text-pyos-deep-purple transition-colors"
                           title="View {{ contributor.display_name }}'s Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                    {% endif %}
                    
                    {% if contributor.website %}
                        <a href="{{ contributor.website }}" 
                           target="_blank"
                           class="text-gray-400 hover:text-pyos-deep-purple transition-colors"
                           title="Visit {{ contributor.display_name }}'s website">
                            <i class="fas fa-globe"></i>
                        </a>
                    {% endif %}
                    
                    {% if contributor.orcidid %}
                        <a href="https://orcid.org/{{ contributor.orcidid }}" 
                           target="_blank"
                           class="text-gray-400 hover:text-pyos-deep-purple transition-colors"
                           title="View {{ contributor.display_name }}'s ORCID">
                            <i class="fab fa-orcid"></i>
                        </a>
                    {% endif %}
                    
                    {% if contributor.mastodon %}
                        <a href="{{ contributor.mastodon }}" 
                           target="_blank"
                           class="text-gray-400 hover:text-pyos-deep-purple transition-colors"
                           title="View {{ contributor.display_name }}'s Mastodon">
                            <i class="fab fa-mastodon"></i>
                        </a>
                    {% endif %}
                </div>
            </div>
            {% empty %}
            <!-- Fallback if no contributors are available -->
            <div class="col-span-4 text-center text-gray-500 py-8">
                <p>Unable to load contributor data at this time. Please try again later.</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Recent Blog Posts -->
<section class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="bg-pyos-light-purple rounded-lg p-8">
            <h2 class="text-3xl font-bold text-center mb-8 text-pyos-deep-purple font-poppins">Recent blog posts & updates</h2>
            
            <div class="grid md:grid-cols-3 gap-6 mb-8">
                {% for post in recent_blog_posts %}
                <a href="/blog/{{ post.slug }}/" class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300 block">
                    <!-- Header Image -->
                    {% if post.header_image %}
                    <div class="h-40 overflow-hidden">
                        <img src="{{ post.header_image.url }}"
                             alt="{{ post.header_image_alt|default:post.title }}"
                             class="w-full h-full object-cover">
                    </div>
                    {% else %}
                    <div class="h-40 bg-gradient-to-br from-pyos-medium-purple to-pyos-dark-purple"></div>
                    {% endif %}

                    <div class="p-6">
                        <h3 class="font-bold mb-2 text-pyos-deep-purple hover:text-pyos-dark-purple transition-colors">{{ post.title }}</h3>

                        <!-- Meta: Date and Author -->
                        <p class="text-sm text-gray-600 mb-3">
                            {{ post.date|date:"F j, Y" }}
                            {% if post.author %}
                                Â· {{ post.author.name }}
                            {% endif %}
                        </p>

                        <!-- Excerpt -->
                        {% if post.excerpt %}
                        <p class="text-gray-700 text-sm">{{ post.excerpt|truncatewords:20 }}</p>
                        {% endif %}
                    </div>
                </a>
                {% empty %}
                <!-- Fallback if no blog posts exist -->
                <div class="col-span-3 text-center text-gray-500 py-8">
                    <p>No blog posts available yet. Check back soon!</p>
                </div>
                {% endfor %}
            </div>
            
            <div class="text-center">
                <a href="/blog/" class="bg-pyos-deep-purple hover:bg-pyos-dark-purple text-white px-6 py-3 rounded-lg font-semibold transition-all duration-300">
                    View more <i class="fa fa-arrow-circle-right ml-2"></i>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Recently Accepted Packages -->
<section class="py-16 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-3xl font-bold text-center mb-12 text-pyos-deep-purple font-poppins">Recently Accepted Python Packages</h2>
        
        <div class="grid md:grid-cols-3 gap-6 mb-8">
            {% for package in recent_packages %}
            <div class="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-300">
                <h3 class="text-xl font-bold mb-2 text-pyos-deep-purple">{{ package.package_name }}</h3>
                <p class="text-sm text-gray-600 mb-3">
                    <i class="fas fa-feather mr-1"></i>
                    {% if package.all_current_maintainers %}
                        {% for maintainer in package.all_current_maintainers %}
                            {% if maintainer.name %}
                                {{ maintainer.name }}{% if not forloop.last %}, {% endif %}
                            {% else %}
                                {{ maintainer.github_username }}{% if not forloop.last %}, {% endif %}
                            {% endif %}
                        {% endfor %}
                    {% elif package.submitting_author.name != 'Name' %}
                        {{ package.submitting_author.name }}
                    {% else %}
                        {{ package.submitting_author.github_username }}
                    {% endif %}
                </p>
                <p class="text-gray-700 mb-4 text-sm">{{ package.package_description|truncatewords:20 }}</p>
                <div class="space-y-2 text-sm">
                    {% if package.repository_link %}
                        <a href="{{ package.repository_link }}" target="_blank" class="flex items-center text-pyos-deep-purple hover:underline">
                            <i class="fab fa-github mr-2"></i> View Code
                        </a>
                    {% endif %}
                    {% if package.gh_meta.documentation %}
                        <a href="{{ package.gh_meta.documentation }}" target="_blank" class="flex items-center text-pyos-deep-purple hover:underline">
                            <i class="fas fa-book-open mr-2"></i> View Docs
                        </a>
                    {% endif %}
                    {% if package.issue_link %}
                        <a href="{{ package.issue_link }}" target="_blank" class="flex items-center text-pyos-deep-purple hover:underline">
                            <i class="fa-solid fa-user-pen mr-2"></i> View Review
                        </a>
                    {% endif %}
                </div>
            </div>
            {% empty %}
            <!-- Fallback if no packages are available -->
            <div class="col-span-3 text-center text-gray-500 py-8">
                <p>Unable to load package data at this time. Please try again later.</p>
            </div>
            {% endfor %}
        </div>
        
        <div class="text-center">
            <a href="#" class="bg-pyos-deep-purple hover:bg-pyos-dark-purple text-white px-6 py-3 rounded-lg font-semibold transition-all duration-300">
                View All Accepted Packages <i class="fa fa-arrow-circle-right ml-2"></i>
            </a>
        </div>
    </div>
</section>
{% endblock %}
